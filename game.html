<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sammle Momente</title>
    <style>
        /* Verhindert das Scrollen der ganzen Seite beim Ziehen und Zoom auf Touchgeräten */
        body { background-color: #fff5f6; margin: 0; overflow: hidden; font-family: sans-serif; text-align: center; touch-action: none; }
        
        h2 { color: #ff4d6d; font-size: 2rem; margin-top: 20px; pointer-events: none; user-select: none; position: relative; z-index: 10; }

        .moment-container {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        /* Bilder: Groß (180px), verschiebbar, sanft atmend */
        .moment {
            position: absolute; 
            width: 180px;
            height: 180px; 
            object-fit: cover; 
            border-radius: 20px; 
            border: 5px solid white; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            cursor: grab; /* Zeigt Hand-Cursor an */
            transition: transform 0.1s, opacity 0.4s; 
            /* Sanfte "Atem"-Bewegung */
            animation: breathe 5s infinite ease-in-out alternate;
            touch-action: none; /* Wichtig für Drag & Drop auf Handys */
        }

        /* Aussehen, wenn man das Bild gerade festhält */
        .moment.dragging {
            cursor: grabbing;
            box-shadow: 0 20px 40px rgba(0,0,0,0.4);
            transform: scale(1.1) !important; /* Etwas größer beim Halten */
            z-index: 1000; /* Immer im Vordergrund beim Ziehen */
            animation: none; /* Keine Atmung beim Ziehen */
            transition: none; /* Direkte Reaktion ohne Verzögerung */
        }

        .found { opacity: 0; transform: scale(0) !important; pointer-events: none; transition: 0.5s all; }
        
        /* Animation: Sanftes Atmen auf der Stelle */
        @keyframes breathe { 
            0% { transform: translateY(0) scale(1); } 
            100% { transform: translateY(-8px) scale(1.03); } 
        }

        #next-btn {
            display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: #ff4d6d; color: white; padding: 25px 50px; border-radius: 60px;
            text-decoration: none; font-size: 1.8rem; z-index: 2000; box-shadow: 0 10px 30px rgba(255, 77, 109, 0.4);
        }
    </style>
</head>
<body>
    <h2>Finde alle 10 Bilder! (<span id="count">0</span>/10)</h2>
    
    <div class="moment-container" id="game-area">
        <img src="1.jpeg" class="moment" style="top:10%; left:5%;">
        <img src="2.jpeg" class="moment" style="top:20%; left:60%;">
        <img src="3.jpeg" class="moment" style="top:50%; left:10%;">
        <img src="4.jpeg" class="moment" style="top:65%; left:65%;">
        <img src="5.jpeg" class="moment" style="top:35%; left:35%;">
        <img src="6.jpeg" class="moment" style="top:5%; left:45%;">
        <img src="7.jpeg" class="moment" style="top:60%; left:80%;">
        <img src="8.jpeg" class="moment" style="top:80%; left:20%;">
        <img src="9.jpeg" class="moment" style="top:5%; left:75%;">
        <img src="10.jpeg" class="moment" style="top:35%; left:80%;">
    </div>
    
    <a href="video.html" id="next-btn">Weiter ❤️</a>

    <script>
        // --- Logik für das Einsammeln ---
        let c = 0;
        const totalImages = 10; // Ziel ist jetzt 10

        function collectImage(element) {
            if (!element.classList.contains('found')) {
                element.classList.add('found');
                c++;
                document.getElementById('count').innerText = c;
                // Prüfen ob alle 10 gefunden wurden
                if (c === totalImages) document.getElementById('next-btn').style.display = 'block';
            }
        }

        // --- Verbesserte Logik für das Verschieben (Drag & Drop) ---
        const moments = document.querySelectorAll('.moment');
        let activeItem = null;
        let initialX, initialY;
        let currentX = 0, currentY = 0;
        let xOffset = 0, yOffset = 0;
        let isDragging = false;
        let startTime;

        moments.forEach(item => {
            // Touch Events (Handy)
            item.addEventListener('touchstart', dragStart, {passive: false});
            item.addEventListener('touchend', dragEnd, {passive: false});
            item.addEventListener('touchmove', drag, {passive: false});

            // Maus Events (PC)
            item.addEventListener('mousedown', dragStart, false);
            item.addEventListener('mouseup', dragEnd, false);
            item.addEventListener('mousemove', drag, false);
        });

        function dragStart(e) {
            startTime = new Date().getTime();
            
            if (e.type === "touchstart") {
                initialX = e.touches[0].clientX - xOffset;
                initialY = e.touches[0].clientY - yOffset;
            } else {
                initialX = e.clientX - xOffset;
                initialY = e.clientY - yOffset;
            }

            if (e.target.classList.contains('moment')) {
                activeItem = e.target;
                activeItem.classList.add('dragging');

                // Aktuelle Position auslesen, damit es nicht springt
                const style = window.getComputedStyle(activeItem);
                const matrix = new WebKitCSSMatrix(style.transform);
                xOffset = matrix.m41;
                yOffset = matrix.m42;
            }
        }

        function drag(e) {
            if (activeItem) {
                e.preventDefault(); // Verhindert Scrollen
                isDragging = true;
            
                if (e.type === "touchmove") {
                    currentX = e.touches[0].clientX - initialX;
                    currentY = e.touches[0].clientY - initialY;
                } else {
                    currentX = e.clientX - initialX;
                    currentY = e.clientY - initialY;
                }

                setTranslate(currentX, currentY, activeItem);
            }
        }

        function dragEnd(e) {
            if (!activeItem) return;

            initialX = currentX;
            initialY = currentY;
            xOffset = currentX;
            yOffset = currentY;
            
            // Prüfen: War es ein kurzer Klick (unter 200ms) oder wurde gezogen?
            let endTime = new Date().getTime();
            let timeTaken = endTime - startTime;
            
            // Wenn nicht gezogen wurde ODER der Klick sehr kurz war -> Einsammeln
            if (!isDragging || timeTaken < 200) {
                 collectImage(activeItem);
            }

            activeItem.classList.remove('dragging');
            activeItem = null;
            isDragging = false;
        }

        function setTranslate(xPos, yPos, el) {
            el.style.transform = "translate3d(" + xPos + "px, " + yPos + "px, 0)";
        }
    </script>
</body>
</html>
