<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eine √úberraschung üöö</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        /* Grundeinstellungen */
        body { margin: 0; overflow: hidden; font-family: sans-serif; height: 100vh; display: flex; justify-content: center; align-items: center; background-color: #333; }

        /* --- 1. DER START SCREEN (Damit Audio funktioniert) --- */
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center;
        }
        .start-btn {
            padding: 20px 50px; font-size: 1.5rem; background: #fff; color: #ff4d6d;
            border: none; border-radius: 50px; cursor: pointer; font-weight: bold;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2); transition: 0.3s;
            animation: pulse 2s infinite;
        }
        .start-btn:hover { transform: scale(1.1); }

        /* --- 2. DIE LANDSCHAFT (Animation) --- */
        #scene {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, #87CEEB 60%, #90EE90 60%);
            display: none; /* Erst unsichtbar */
            overflow: hidden;
        }
        .sun {
            position: absolute; top: 50px; right: 50px; width: 80px; height: 80px;
            background: #FFD700; border-radius: 50%; box-shadow: 0 0 40px #FFD700;
        }
        .cloud {
            position: absolute; background: white; border-radius: 50px; opacity: 0.9;
        }

        /* Der Lieferwagen & Postbote */
        .truck-group {
            position: absolute; bottom: 30%; left: -300px; /* Start au√üerhalb */
            display: flex; align-items: flex-end;
            transition: left 3s ease-out; /* F√§hrt sanft ein */
        }
        .truck { font-size: 140px; z-index: 2; position: relative; }
        
        /* Postbote (versteckt hinter Truck, kommt dann vor) */
        .postman {
            font-size: 110px; position: absolute; left: 50px; bottom: 0;
            opacity: 0; transform: translateX(-50px);
            transition: all 1s ease-out; z-index: 3;
        }

        /* Sprechblase */
        .bubble {
            position: absolute; bottom: 160px; left: 150px;
            background: white; padding: 20px; border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            font-size: 1.2rem; font-weight: bold; color: #333;
            opacity: 0; transition: opacity 0.5s; width: 250px; text-align: center;
            z-index: 10;
        }
        .bubble::after {
            content: ""; position: absolute; bottom: -10px; left: 20px;
            border-width: 10px; border-style: solid; border-color: white transparent transparent transparent;
        }

        /* --- 3. DER BRIEF (Das Finale) --- */
        #letter-scene {
            display: none; width: 100%; height: 100%; background: #fff5f6;
            justify-content: center; align-items: center; opacity: 0; transition: opacity 1s;
        }
        
        .envelope-wrapper {
            position: relative; cursor: pointer; margin-top: 50px;
        }
        
        .envelope {
            width: 300px; height: 200px; background: #ff4d6d;
            position: relative; border-radius: 0 0 10px 10px;
            z-index: 10; display: flex; justify-content: center; align-items: center;
        }
        .flap {
            position: absolute; top: 0; left: 0;
            border-left: 150px solid transparent; border-right: 150px solid transparent;
            border-top: 110px solid #ff758f;
            transform-origin: top; transition: 0.6s; z-index: 11;
        }
        .pocket {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 100%;
            background: transparent; border-radius: 0 0 10px 10px;
            box-shadow: inset 0 -10px 30px rgba(0,0,0,0.1); z-index: 12; pointer-events: none;
        }
        
        .heart-seal { font-size: 60px; z-index: 12; transition: 0.3s; animation: pulse 1.5s infinite; }

        /* Das Papier innen */
        .paper {
            position: absolute; bottom: 0; left: 15px;
            width: 270px; height: 180px; background: white;
            transition: transform 0.8s 0.4s; /* Verz√∂gerung damit Lasche erst aufgeht */
            z-index: 5; /* Startet IM Umschlag (unter Flap/Pocket) */
            padding: 20px; box-sizing: border-box; text-align: center;
            border-radius: 5px;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
        }

        /* DER BUG FIX: Text ist erst unsichtbar */
        .paper-content {
            opacity: 0; transition: opacity 0.5s 1s; /* Erscheint erst ganz am Schluss */
        }

        .paper h2 { font-family: 'Dancing Script', cursive; color: #ff4d6d; font-size: 1.4rem; margin: 0 0 15px 0; }
        .btn-group { display: flex; gap: 10px; justify-content: center; }
        .btn { padding: 8px 20px; border-radius: 20px; border: none; cursor: pointer; text-decoration: none; font-weight: bold; }
        .yes { background: #ff4d6d; color: white; }
        .no { background: #eee; color: #555; }

        /* Animation Klassen */
        .open .flap { transform: rotateX(180deg); z-index: 1; } /* Lasche klappt nach hinten */
        .open .heart-seal { opacity: 0; transform: scale(0); }
        .open .paper { transform: translateY(-120px); z-index: 15; box-shadow: 0 5px 15px rgba(0,0,0,0.1); } /* Papier f√§hrt hoch und kommt in Vordergrund */
        .open .paper-content { opacity: 1; } /* JETZT wird Text sichtbar */

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes cloudMove { from { left: -20%; } to { left: 120%; } }

    </style>
</head>
<body>

    <div id="start-screen">
        <h1 style="color: white; font-family: 'Dancing Script'; font-size: 3rem;">F√ºr meine Dosienka ‚ù§Ô∏è</h1>
        <button class="start-btn" onclick="startShow()">√úberraschung starten</button>
    </div>

    <div id="scene">
        <div class="sun"></div>
        <div class="cloud" style="top: 10%; width: 120px; height: 60px; animation: cloudMove 40s linear infinite;"></div>
        <div class="cloud" style="top: 25%; width: 80px; height: 40px; animation: cloudMove 55s linear infinite;"></div>

        <div class="truck-group" id="truckGroup">
            <div class="postman">üëÆ‚Äç‚ôÇÔ∏èüíåüå∑</div> <div class="truck">üöö</div>
            <div class="bubble">Ich habe Post f√ºr dich und deine Lieblingsblumen!</div>
        </div>
    </div>

    <div id="letter-scene">
        <div class="envelope-wrapper" id="envelope" onclick="toggleLetter()">
            <div class="flap"></div>
            <div class="pocket"></div>
            <div class="envelope">
                <div class="heart-seal">‚ù§Ô∏è</div>
            </div>
            
            <div class="paper">
                <div class="paper-content">
                    <h2>Hallo meine Dosienka,<br>M√∂chtest du mein Valentine sein?</h2>
                    <div class="btn-group">
                        <a href="game.html" class="btn yes">JA ‚ù§Ô∏è</a>
                        <button class="btn no" onclick="closeLetter(event)">Nein</button>
                    </div>
                </div>
            </div>
            <p style="text-align: center; color: #ff4d6d; margin-top: 50px; font-weight: bold; position: relative; z-index: 20;">(Klicken zum √ñffnen)</p>
        </div>
    </div>

    <audio id="audioPlayer">
        <source src="lkw.mp3" type="audio/mpeg">
    </audio>

    <script>
        function startShow() {
            // 1. Start Screen weg
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('scene').style.display = 'block';

            // 2. Audio starten
            const audio = document.getElementById('audioPlayer');
            audio.play().catch(error => {
                console.log("Audio konnte nicht starten: " + error);
            });

            // 3. Animation Ablauf
            const truckGroup = document.getElementById('truckGroup');
            const postman = document.querySelector('.postman');
            const bubble = document.querySelector('.bubble');

            // Truck f√§hrt ein (dauert 3s)
            setTimeout(() => {
                truckGroup.style.left = "20%"; // F√§hrt ins Bild
            }, 100);

            // Postbote steigt aus (nach 3.5s)
            setTimeout(() => {
                postman.style.opacity = "1";
                postman.style.transform = "translateX(160px)"; // Bewegt sich rechts neben den Truck
            }, 3500);

            // Sprechblase kommt (nach 4.5s)
            setTimeout(() => {
                bubble.style.opacity = "1";
            }, 4500);

            // Alles ausblenden, Brief zeigen (nach 8s)
            setTimeout(() => {
                document.getElementById('scene').style.transition = "opacity 1s";
                document.getElementById('scene').style.opacity = "0";
                
                setTimeout(() => {
                    document.getElementById('scene').style.display = "none";
                    const letterScene = document.getElementById('letter-scene');
                    letterScene.style.display = "flex";
                    // Kleines Delay f√ºr Fade-In
                    setTimeout(() => { letterScene.style.opacity = "1"; }, 100);
                }, 1000);
            }, 8000);
        }

        function toggleLetter() {
            document.getElementById('envelope').classList.add('open');
        }

        function closeLetter(event) {
            event.stopPropagation(); // Verhindert sofortiges Wieder√∂ffnen
            document.getElementById('envelope').classList.remove('open');
        }
    </script>
</body>
</html>
